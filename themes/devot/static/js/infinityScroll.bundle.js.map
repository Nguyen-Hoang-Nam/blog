{"version":3,"file":"infinityScroll.bundle.js","mappings":"iEAAA,IAAIA,EAAO,EACPC,GAAW,EAEXC,EAAeC,SAASC,gBAAgBF,aAEtCG,EAAeF,SAASG,eAAe,iBA2B7CC,OAAOC,iBAAiB,UAAU,WACzBH,GAIDE,OAAOE,QAAUF,OAAOG,aAAeR,IA7BvCD,GAIJU,MAAM,eAAQX,IAAQY,MAAK,SAACC,GACpBA,EAASC,GACTD,EAASE,OAAOH,MAAK,SAACI,IACH,IAAIC,WACAC,gBAAgBF,EAAM,aACvBG,iBAAiB,SAE7BC,SAAQ,SAACC,GACXhB,EAAaiB,YAAYD,MAG7BrB,IACAE,EAAeC,SAASC,gBAAgBF,gBAG5CD,GAAW,W","sources":["webpack:///./src/js/infinityScroll.ts"],"sourcesContent":["let page = 2;\nlet lastPage = false;\n\nlet scrollHeight = document.documentElement.scrollHeight;\n\nconst listContents = document.getElementById(\"list-contents\");\n\nconst loadPage = () => {\n    if (lastPage) {\n        return;\n    }\n\n    fetch(`page/${page}`).then((response) => {\n        if (response.ok) {\n            response.text().then((html) => {\n                const parser = new DOMParser();\n                const doc = parser.parseFromString(html, \"text/html\");\n                const posts = doc.querySelectorAll(\".post\");\n\n                posts.forEach((nodeList) => {\n                    listContents.appendChild(nodeList);\n                });\n\n                page++;\n                scrollHeight = document.documentElement.scrollHeight;\n            });\n        } else {\n            lastPage = true;\n        }\n    });\n};\n\nwindow.addEventListener(\"scroll\", () => {\n    if (!listContents) {\n        return;\n    }\n\n    if (window.scrollY + window.innerHeight >= scrollHeight) {\n        loadPage();\n    }\n});\n"],"names":["page","lastPage","scrollHeight","document","documentElement","listContents","getElementById","window","addEventListener","scrollY","innerHeight","fetch","then","response","ok","text","html","DOMParser","parseFromString","querySelectorAll","forEach","nodeList","appendChild"],"sourceRoot":""}